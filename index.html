<html lang="zh-TW">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
	<title>Quilldren Diary</title>
	
	<script type="text/javascript" src="https://requirejs.org/docs/release/2.3.2/minified/require.js"></script>
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="js_PC.js"></script>
	<script src="js_Phone.js"></script>
	<script src="page.js"></script>
	<link rel="stylesheet" type="text/css" href="css_PC.css">
	<link rel="stylesheet" type="text/css" href="css_Phone.css">
	<link rel="stylesheet" type="text/css" href="page.css">

<body>
	<!--Loading頁面-->
	<div id="loading">
		<div id="loading_text">Loading</div>
		<div id="running_quilldren"></div>
	</div>

	<!--桌面-->
	<div id="ink"></div>
	<a href="https://twitter.com/quilldren_tw" target="_blank">
		<div id="twitter" class="icon">		
			<div id="twitter2"></div>
		</div>
	</a>
	<a href="https://www.plurk.com/quilldren_diary" target="_blank">
		<div id="pen" class="icon">
			<div id="pen2"></div>
		</div>
	</a>
	<div id="earringsL" class="icon" onclick="previous()"></div>
	<!--書開頭-->
	<div id="book" class="icon">
		<div id="book2">
		
		</div>
	</div>
	<!--書結尾-->
	<div id="earringsR" class="icon" onclick="next()"></div>
	<div id="pad" class="icon">
		<div id="pad2"></div>
	</div>
	<div id="quilldren"></div>
	<div id="cup"></div>
	<div id="toast"></div>
</body>
</html>
<script>
	var j;
	$('#book').click(changeScene);

	/* 生成書頁 */
	if ($(window).width() > 480) {
		create_page(5);/*排版頁數+1*/
		insert_page_type1L(1,'pic1.png','pic2.png','pic3.png','name1','name2','name3','text1','text2','text3','stc1','stc2');
		insert_page_type1R(2,'pic1.png','pic2.png','pic3.png','name1','name2','name3','text1','text2','text3','stc1','stc2');
		insert_page_type2L(3,'pic1.png','pic2.png','pic3.png','pic4.png','pic5.png','test1','test2','test3','test4','test5');
		insert_page_type2R(4,'pic1.png','pic2.png','pic3.png','pic4.png','pic5.png','test1','test2','test3','test4','test5');
	}else{
		create_page(6);/*排版頁數+2*/
		insert_page_type1L(2,'pic1.png','pic2.png','pic3.png','pic4.png','pic5.png','test1','test2','test3','test4','test5');
		insert_page_type1R(4,'pic1.png','pic2.png','pic3.png','pic4.png','pic5.png','test1','test2','test3','test4','test5');
		insert_page_type2L(6,'pic1.png','pic2.png','pic3.png','pic4.png','pic5.png','test1','test2','test3','test4','test5');
		insert_page_type2R(8,'pic1.png','pic2.png','pic3.png','pic4.png','pic5.png','test1','test2','test3','test4','test5');
	}
	

	var i = 0;/*計算頁數*/
	
	/*RWD設定offset*/
	$(document).ready(function(){
		setOffset();
	});
	$(document).ready(function(){
		$(window).resize(function() {
			setOffset();
		});
	});

	/*預先載入頁面*/
	window.onload = function() {	
		$('#loading').css("transition", "0.5s"); 
		$('#loading').css("opacity", "0"); 
		$('#running_quilldren').css("transition", "0.5s"); 
		$('#running_quilldren').css("opacity", "0"); 
		$('body').css("transition", "0.5s"); 

		
		setTimeout(
			function() {
				$('#loading').remove();
				$('#running_quilldren').remove();
		}, 500);
	};
	
	/*預先載入後面會用到的圖片*/
	var preloaded = 0;
	var images = new Array(
		"img/Pad-phone.png",
		"img/Pen-phone.png",
		"img/Twitter-phone.png",
		"img/Quildren-page.png",
		"img/Quildren-phone.png",
		"img/book-bgL.png",
		"img/book-bgR.png",
		"img/book-phone.png");
	function preLoader(e) {
		for (var i = 0; i < images.length; i++) {
			var tempImage = new Image();
			
			tempImage.addEventListener("load", progress, true);
			tempImage.src = images[i];
		}
	}
	function progress() {
		preloaded++;
		
		if (preloaded == images.length) {
			/*預留，看之後要不要弄讀取條*/
		}
	}
	this.addEventListener("DOMContentLoaded", preLoader, true);


	/*從桌面切換到看書的畫面*/
	function changeScene(){
		if(i==0){		
			if ($(window).width() > 480) {
				change_scene_PC();
			}else{
				change_scene_phone();
			}
		}
	}

	/*上一頁*/
	function previous(){
		if ($(window).width() > 480) {
			previous_PC();
		}else{
			previous_phone();
		}
	}
	/*下一頁*/
	function next(){
		if ($(window).width() > 480) {
			next_PC();
		}else{
			next_phone();
		}
	}
</script>